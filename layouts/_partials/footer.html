{{- $currentYear := dateFormat "2006" now }}
{{- $estYear := default $currentYear .Site.Params.established_year }}
{{- $shortYear := dateFormat "06" now }}
{{- $yearDisplay := cond (eq $estYear $currentYear) (string $currentYear) (printf "%v-%v" $estYear $shortYear) }}

{{- /* Error Handler */}}
{{- $error:= "" -}}
{{- if .Site.Params.established_year -}}
  {{- $paramYear := string .Site.Params.established_year -}}
  {{- $validYearFormat := findRE `^\d{4}$` $paramYear -}}
  {{- if not $validYearFormat -}}
    {{- warnf "'%s' is not a valid year value" $paramYear -}}
    {{- $error = "text-destructive font-bold" -}}
  {{- else if gt $paramYear $currentYear -}}
    {{- warnf "'%s' is a future year value" $paramYear -}}
    {{- $error = "text-destructive font-bold" -}}
  {{- end -}}
{{- end -}}


<div class="max-w-desktop mx-auto flex w-full flex-col items-center justify-end gap-10.5">
  {{- partial "cta" . }}
</div>

<div class="border-secondary-foreground border-t-2">
  <div
    class="max-w-desktop mx-auto flex w-full items-center justify-center px-20 py-4 md:flex-wrap md:justify-between md:gap-6"
  >
    <!--Logo-->
    <div class="hidden shrink-0 items-center gap-0.5 md:inline-flex">
      {{ partial "ks/icon" (dict "name" "resonance-logo" "class" "size-6.5") }}
      <span class="title">{{ site.Title | default "Resonance" }}</span>
    </div>
    <!-- Copyright & Socials -->
    <div class="flex flex-col items-center gap-4 md:flex-row">
      <!-- Copyright -->
      <div>
        &copy;
        <span {{ with $error }}class="{{ . }}"{{- end }}>{{ $yearDisplay }}</span>
        {{ site.Title | default "Resonance" }}.
        {{ i18n "FooterLicense" . | default "All rights reserved" }}
      </div>
      <!-- Socials -->
      <nav aria-label="{{ i18n "SocialLinksLabel" . | default "Social links" }}">
        {{- $socialMenu := .Site.Menus.social }}
        <ul class="item-center flex">
          {{- range $socialMenu }}
            <li>
              <a
                class="group item-center flex rounded-full p-2"
                href="{{ .URL }}"
                target="_blank"
                rel="noopener"
                aria-label="{{ .Name }} {{ i18n "OpensInNewTab" | default "(Opens in a new tab)" }}"
              >
                {{ with .Params.icon | default .Name }}
                  {{ $icon := . }}
                  {{ partial "ks/icon" (dict "name" $icon "class" "size-6.5 group-hover:text-black transition-colors duration-300 ease-in-out") }}
                {{- else }}
                  {{ .Name }}
                {{- end }}
              </a>
            </li>
          {{- end }}
        </ul>
      </nav>
    </div>
  </div>
</div>
