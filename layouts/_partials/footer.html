{{- $currentYear := dateFormat "2006" now }}
{{- $estYear := default $currentYear .Site.Params.established_year }}
{{- $shortYear := dateFormat "06" now }}
{{- $yearDisplay := cond (eq $estYear $currentYear) (string $currentYear) (printf "%v-%v" $estYear $shortYear) }}

{{- /* Error Handler */}}
{{- $error:= "" -}}
{{- if .Site.Params.established_year -}}
  {{- $paramYear := string .Site.Params.established_year -}}
  {{- $validYearFormat := findRE `^\d{4}$` $paramYear -}}
  {{- if not $validYearFormat -}}
    {{- warnf "'%s' is not a valid year value" $paramYear -}}
    {{- $error = "text-destructive font-bold" -}}
  {{- else if gt $paramYear $currentYear -}}
    {{- warnf "'%s' is a future year value" $paramYear -}}
    {{- $error = "text-destructive font-bold" -}}
  {{- end -}}
{{- end -}}


<div class="max-w-desktop mx-auto flex flex-col gap-10.5 w-full items-center justify-end">
{{- partial "cta" . }}</div>

<div class="border-secondary-foreground border-t-2">


  <div
    class="max-w-desktop mx-auto flex w-full items-center justify-center md:justify-between px-20 py-4"
  >
  <!--Logo-->
    <div class="hidden md:inline-flex items-center gap-0.5">
      {{ partial "ks/icon" (dict "name" "resonance-logo" "class" "size-6.5") }}
      <span class="title">{{ site.Title | default "Resonance" }}</span>
    </div>
    <!-- Copyright & Socials -->
    <div class="flex flex-col items-center md:flex-row gap-4">
         <!-- Copyright -->
      <div>
        &copy;
        <span {{ with $error }}class="{{ . }}"{{- end }}>{{ $yearDisplay }}</span>
        {{ site.Title | default "Resonance" }}.
        {{ i18n "FooterLicense" . | default "All rights reserved" }}
      </div>
       <!-- Socials -->
      <nav aria-label="{{ i18n "SocialLinksLabel" . | default "Social links" }}">
        {{- $socialMenu := .Site.Menus.social }}
        <ul class="item-center flex ">
          {{- range $socialMenu }}
            <li>
              <a
                class="group p-2 rounded-full flex item-center"
                href="{{ .URL }}"
                target="_blank"
                rel="noopener"
                aria-label='{{ .Name }} {{ i18n "OpensInNewTab" | default "(Opens in a new tab)"}}'
              >
                {{ with .Pre }} 
                  {{ $icon := . }}
                  {{ partial "ks/icon" (dict "name" $icon "class" "size-6.5 group-hover:text-black transition-colors duration-300 ease-in-out") }}
                {{- else }}
                  {{ .Name }}
                {{- end }}
              </a>
            </li>
          {{- end }}
        </ul>
      </nav>
    </div>
  </div>
</div>
